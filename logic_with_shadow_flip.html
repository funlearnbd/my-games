<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Kids Learning Game</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
Â  body{
Â  Â  margin:0;
Â  Â  font-family: "Comic Sans MS", Arial, sans-serif;
Â  Â  background: linear-gradient(135deg,#ffecd2,#fcb69f);
Â  Â  height:100vh;
Â  Â  display:flex;
Â  Â  align-items:center;
Â  Â  justify-content:center;
Â  Â  overflow:hidden;
Â  }

Â  /* Start screen */
Â  #startScreen{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;}
Â  #startScreen h1{font-size:3rem;color:#ff4081;text-shadow:2px 2px 5px rgba(0,0,0,.3);margin-bottom:28px;}
Â  .start-button{font-size:2.5rem;padding:18px 40px;border-radius:48px;border:none;background:linear-gradient(45deg,gold,orange);color:#fff;cursor:pointer;box-shadow:0 0 28px gold;animation:glow 1.5s infinite alternate}
Â  @keyframes glow{from{box-shadow:0 0 20px gold}to{box-shadow:0 0 48px orange}}

Â  /* Game */
Â  .game-container{display:none; width:100%; max-width:760px; padding:16px; box-sizing:border-box; text-align:center}
Â  .top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
Â  #question{font-size:1.6rem; color:#333; margin:6px auto}
Â  .score{font-size:1.3rem;color:#2e7d32;font-weight:700}

Â  /* containers */
Â  .option-container{
Â  Â  border:4px dashed #ff9800;
Â  Â  border-radius:16px;
Â  Â  padding:14px;
Â  Â  margin:22px 0;
Â  Â  display:grid;
Â  Â  grid-template-columns:repeat(3,1fr);
Â  Â  grid-auto-rows:180px;
Â  Â  gap:14px;
Â  Â  background: rgba(255,255,255,0.12);
Â  Â  justify-items:center;
Â  Â  align-items:center;
Â  }

Â  /* answers container: smaller rows if fewer items */
Â  .answer-container{
Â  Â  border:4px dashed #42a5f5;
Â  Â  border-radius:16px;
Â  Â  padding:14px;
Â  Â  margin-top:28px;
Â  Â  display:flex;
Â  Â  gap:14px;
Â  Â  justify-content:center;
Â  Â  background: rgba(255,255,255,0.08);
Â  }

Â  .option{
Â  Â  width:100%;
Â  Â  height:100%;
Â  Â  max-width:180px;
Â  Â  max-height:180px;
Â  Â  border-radius:20px;
Â  Â  background:#fff;
Â  Â  display:flex;
Â  Â  align-items:center;
Â  Â  justify-content:center;
Â  Â  box-shadow:0 6px 14px rgba(0,0,0,0.18);
Â  Â  transition: transform .18s, box-shadow .18s;
Â  Â  cursor:pointer;
Â  Â  user-select:none;
Â  Â  position:relative;
Â  Â  overflow:hidden;
Â  }
Â  .option img{max-width:95%; max-height:95%}
Â  .option:hover{transform:scale(1.06)}
Â  .question-tile{cursor:default; pointer-events:none} /* question tiles not clickable */

Â  .blank{background:#f0f0f0; display:flex; align-items:center; justify-content:center; font-size:2.4rem; color:#666}
Â  .blank:empty{font-size:2.6rem; color:#888; opacity:0.9}
Â  .shine{animation:shineAnim .9s ease-out forwards}
Â  @keyframes shineAnim{
Â  Â  0%{transform:scale(.6); opacity:0}
Â  Â  60%{transform:scale(1.12); opacity:1}
Â  Â  100%{transform:scale(1); box-shadow:0 0 20px gold}
Â  }

Â  .star-effect{ position:absolute; pointer-events:none; font-size:1.6rem; animation:starFloat 1s ease-out forwards }
Â  @keyframes starFloat{from{opacity:1;transform:translateY(0) scale(1)} to{opacity:0; transform:translateY(-60px) scale(1.8)}}

Â  /* congrats */
Â  .congrats{ position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); background:linear-gradient(135deg,#ffeb3b,#ff9800); padding:36px 48px; border-radius:20px; font-size:2rem; color:#fff; text-align:center; box-shadow:0 0 50px rgba(255,140,0,.8); z-index:2000; display:none; overflow:visible}
Â  .congrats-star{ position:absolute; font-size:1.6rem; color:gold; animation:starFly 2s forwards }
Â  @keyframes starFly{0%{transform:translateY(120px) scale(.5); opacity:0}50%{opacity:1; transform:translateY(-20px) scale(1.2)}100%{transform:translateY(-160px) scale(1); opacity:0}}

Â  /* exit */
Â  #exitBtn{ margin-top:12px; padding:8px 20px; border-radius:14px; border:none; background:#e53935; color:#fff; font-size:1rem; cursor:pointer }
Â  /* responsive */
Â  @media(max-width:480px){
Â  Â  .option-container{ grid-auto-rows:140px; gap:10px; padding:10px }
Â  Â  .option{max-width:140px; max-height:140px}
Â  Â  .answer-container{flex-wrap:wrap}
Â  }
</style>
</head>
<body>

Â  <div id="startScreen">
Â  Â  <h1>ðŸŒŸ Fun Learning Game ðŸŒŸ</h1>
Â  Â  <button id="startBtn" class="start-button">â–¶ Start Game</button>
Â  </div>

Â  <div id="game" class="game-container" aria-live="polite">
Â  Â  <div class="top-bar">
Â  Â  Â  <div id="question"></div>
Â  Â  Â  <div id="score" class="score">Score: 0</div>
Â  Â  </div>

Â  Â  Â  Â  <div id="options"></div>

Â  Â  <button id="exitBtn">Exit Game</button>
Â  </div>

Â  <div id="congrats" class="congrats"></div>

Â  Â  <audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
Â  <audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
Â  <audio id="congratsMusic" src="https://actions.google.com/sounds/v1/cartoon/party_horn.ogg"></audio>

<script>
/* ---------- DATA ---------- */
const imageList = ["apple","ball","banana","car","cat","cherry","dog","fish","flower","orange"];

/* ---------- STATE + DOM ---------- */
let currentMode = "find";
let voicesReady = false;
let score = 0;
let waitingNextRound = false; // when congrats playing
let roundAnswered = false;Â  Â  // prevents multiple fills in same round

const loadedImages = {};
const correctSound = document.getElementById('correctSound');
const wrongSound = document.getElementById('wrongSound');
const congratsMusic = document.getElementById('congratsMusic');
const scoreEl = document.getElementById('score');
const congratsEl = document.getElementById('congrats');
const startBtn = document.getElementById('startBtn');
const startScreen = document.getElementById('startScreen');
const game = document.getElementById('game');
const qEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const exitBtn = document.getElementById('exitBtn');

/* preload images (so images show quickly) */
imageList.forEach(name => { const img = new Image(); img.src = `image/${name}.png`; loadedImages[name] = img; });

/* ---------- START / EXIT ---------- */
startBtn.addEventListener('click', () => {
Â  // allow speech after user gesture
Â  voicesReady = true;
Â  startScreen.style.display = 'none';
Â  game.style.display = 'block';
Â  score = 0;
Â  updateScore();
Â  nextRound();
});

exitBtn.addEventListener('click', () => { window.location.href = 'index.html'; });

/* ---------- SPEECH HELPERS ---------- */
function speak(text, cb=null){
Â  if(!voicesReady){ if(cb) setTimeout(cb, 400); return; }
Â  const u = new SpeechSynthesisUtterance(text);
Â  u.rate = 0.8; u.pitch = 1.15;
Â  if(cb) u.onend = cb;
Â  speechSynthesis.speak(u);
}

/* ---------- SCORE / CONGRATS ---------- */
function updateScore(){
Â  scoreEl.textContent = `Score: ${score}`;
Â  if(score>0 && score % 10 === 0 && !waitingNextRound){
Â  Â  showCongratsPopup(score);
Â  }
}

function showCongratsPopup(scoreVal){
Â  waitingNextRound = true;
Â  congratsEl.innerHTML = `ðŸŽ‰ Congratulations! ðŸŽ‰<br>You got ${scoreVal} points!`;
Â  congratsEl.style.display = 'block';
Â  // play music if allowed
Â  try{ congratsMusic.currentTime = 0; congratsMusic.play(); }catch(e){}
Â  // create stars
Â  for(let i=0;i<18;i++){
Â  Â  const s = document.createElement('div');
Â  Â  s.className = 'congrats-star';
Â  Â  s.style.left = (20 + Math.random()*(window.innerWidth-40)) + 'px';
Â  Â  s.style.top = (window.innerHeight + 20) + 'px';
Â  Â  congratsEl.appendChild(s);
Â  Â  setTimeout(()=>s.remove(),2200);
Â  }
Â  // wait for speech to end before continuing
Â  speak(`Congratulations, you have got ${scoreVal} points!`, ()=>{
Â  Â  congratsEl.style.display = 'none';
Â  Â  waitingNextRound = false;
Â  Â  // stop music
Â  Â  try{ congratsMusic.pause(); congratsMusic.currentTime = 0; }catch(e){}
Â  Â  nextRound();
Â  });
}

/* ---------- UTIL ---------- */
function shuffle(arr){ return arr.slice().sort(()=>Math.random()-0.5); }

/* ---------- CORE FLOW ---------- */
function nextRound(){
Â  if(waitingNextRound) return;
Â  roundAnswered = false;
Â  optionsEl.innerHTML = '';
Â  const modes = ['find','different','missing'];
Â  currentMode = modes[Math.floor(Math.random()*modes.length)];
Â  if(currentMode==='find') startFindRound();
Â  else if(currentMode==='different') startDifferentRound();
Â  else startMissingRound();
}

/* ---------- Create visual tiles ---------- */
/* Create a non-clickable question tile (used inside question container) */
function createQuestionTile(name, parent){
Â  const tile = document.createElement('div');
Â  tile.className = 'option question-tile';
Â  const img = document.createElement('img');
Â  img.src = loadedImages[name].src;
Â  img.alt = name;
Â  tile.appendChild(img);
Â  parent.appendChild(tile);
}

/* Create a clickable answer tile (used inside answer container) */
function createAnswerTile(name, isCorrect, parent, blankDiv=null, missing=null){
Â  const tile = document.createElement('div');
Â  tile.className = 'option';
Â  tile.dataset.name = name;
Â  tile.dataset.correct = isCorrect ? '1' : '0';
Â  const img = document.createElement('img');
Â  img.src = loadedImages[name].src;
Â  img.alt = name;
Â  tile.appendChild(img);

Â  tile.addEventListener('click', ()=>{
Â  Â  if(roundAnswered) return; // already answered this round
Â  Â  const correct = tile.dataset.correct === '1';
Â  Â  if(correct){
Â  Â  Â  roundAnswered = true;
Â  Â  Â  try{ correctSound.currentTime = 0; correctSound.play(); }catch(e){}
Â  Â  Â  score++;
Â  Â  Â  updateScore();
Â  Â  Â  // fill blank only when we have a reference
Â  Â  Â  if(blankDiv && missing){
Â  Â  Â  Â  blankDiv.innerHTML = '';
Â  Â  Â  Â  const im = document.createElement('img');
Â  Â  Â  Â  im.src = loadedImages[missing].src;
Â  Â  Â  Â  im.alt = missing;
Â  Â  Â  Â  im.className = 'shine';
Â  Â  Â  Â  blankDiv.appendChild(im);
Â  Â  Â  Â  // sparkle stars on the filled blank
Â  Â  Â  Â  addStars(blankDiv);
Â  Â  Â  } else {
Â  Â  Â  Â  // temporary stars on the tile
Â  Â  Â  Â  addStars(tile);
Â  Â  Â  }

Â  Â  Â  // speak then continue; if congrats triggered, showCongratsPopup will handle waitingNextRound
Â  Â  Â  speak('Well done!', ()=>{
Â  Â  Â  Â  // small delay to let shine finish
Â  Â  Â  Â  setTimeout(()=>{ if(!waitingNextRound) nextRound(); }, 450);
Â  Â  Â  });

Â  Â  } else {
Â  Â  Â  // wrong: give feedback, but DO NOT reveal blank
Â  Â  Â  try{ wrongSound.currentTime = 0; wrongSound.play(); }catch(e){}
Â  Â  Â  tile.animate([{transform:'translateX(0)'},{transform:'translateX(6px)'},{transform:'translateX(-6px)'},{transform:'translateX(0)'}], {duration:250});
Â  Â  Â  speak('Try again');
Â  Â  }
Â  });

Â  parent.appendChild(tile);
}

/* add small star effects centered on a target element */
function addStars(target){
Â  const rect = target.getBoundingClientRect();
Â  for(let i=0;i<6;i++){
Â  Â  const s = document.createElement('div');
Â  Â  s.className = 'star-effect';
Â  Â  s.textContent = 'â­';
Â  Â  // random offset around center
Â  Â  const x = rect.left + rect.width/2 + (Math.random()*60-30);
Â  Â  const y = rect.top + rect.height/2 + (Math.random()*20-10);
Â  Â  s.style.left = x + 'px';
Â  Â  s.style.top = y + 'px';
Â  Â  document.body.appendChild(s);
Â  Â  setTimeout(()=>s.remove(),1100);
Â  }
}

/* ---------- Rounds ---------- */
function startFindRound(){
Â  const choices = shuffle(imageList).slice(0,4);
Â  const target = choices[Math.floor(Math.random()*choices.length)];
Â  qEl.textContent = `Find the ${target}`;
Â  speak(`Can you find the ${target}?`);
Â  // answer tiles (clickable)
Â  const ansContainer = document.createElement('div');
Â  ansContainer.className = 'answer-container';
Â  shuffle(choices).forEach(name => createAnswerTile(name, name===target, ansContainer));
Â  optionsEl.appendChild(ansContainer);
}

function startDifferentRound(){
Â  const base = imageList[Math.floor(Math.random()*imageList.length)];
Â  let odd;
Â  do{ odd = imageList[Math.floor(Math.random()*imageList.length)]; } while(odd === base);
Â  qEl.textContent = 'Find the different one!';
Â  speak('Which one is different?');
Â  const arr = shuffle([base, base, base, odd]);
Â  const ansContainer = document.createElement('div');
Â  ansContainer.className = 'answer-container';
Â  arr.forEach(name => createAnswerTile(name, name===odd, ansContainer));
Â  optionsEl.appendChild(ansContainer);
}

function startMissingRound(){
Â  // 1) pick 6 unique items
Â  const selected = shuffle(imageList).slice(0,6);

Â  // 2) pick exactly 1 missing from selected
Â  const missingIndex = Math.floor(Math.random() * selected.length);
Â  const missing = selected[missingIndex];
Â  // Get the items that are in the grid, excluding the missing one.
Â  const itemsInGrid = selected.filter((_, idx) => idx !== missingIndex);

Â  qEl.textContent = 'Which picture is missing?';
Â  speak('Which picture is missing?');

Â  // QUESTION container (6 slots: 5 filled + 1 blank)
Â  const questionContainer = document.createElement('div');
Â  questionContainer.className = 'option-container';

Â  let blankDiv = null;
Â  selected.forEach((name, idx) => {
Â  Â  if(idx === missingIndex){
Â  Â  Â  blankDiv = document.createElement('div');
Â  Â  Â  blankDiv.className = 'option blank';
Â  Â  Â  questionContainer.appendChild(blankDiv);
Â  Â  } else {
Â  Â  Â  createQuestionTile(name, questionContainer);
Â  Â  }
Â  });
Â  optionsEl.appendChild(questionContainer);

Â  // ANSWER container â†’ 1 correct + 2 wrong
Â  // The wrong options must NOT be in the question grid.
Â  const allImagesExceptGrid = imageList.filter(name => !itemsInGrid.includes(name) && name !== missing);
Â  const wrongOptions = shuffle(allImagesExceptGrid).slice(0, 2);
Â  const answerChoices = shuffle([missing, ...wrongOptions]);

Â  const answerContainer = document.createElement('div');
Â  answerContainer.className = 'answer-container';
Â  answerChoices.forEach(name =>
Â  Â  createAnswerTile(name, name === missing, answerContainer, blankDiv, missing)
Â  );
Â  optionsEl.appendChild(answerContainer);
}


/* create question tile helper (non-clickable) */
function createQuestionTile(name, parent){
Â  const t = document.createElement('div');
Â  t.className = 'option question-tile';
Â  const img = document.createElement('img');
Â  img.src = loadedImages[name].src;
Â  img.alt = name;
Â  t.appendChild(img);
Â  parent.appendChild(t);
}

/* ---------- start initial UI ---------- */
// nothing else â€” user clicks start to begin
</script>
</body>
</html>
