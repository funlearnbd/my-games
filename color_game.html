<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Colors Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
    body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
    .bouncy-tap { transition: transform 0.1s ease-in-out; }
    .bouncy-tap:active { transform: scale(0.95); }
    .incorrect-animation { animation: incorrect-shake 0.3s ease-in-out; }
    .correct-pop-out { position: relative; z-index: 50; animation: popOut 0.8s ease-in-out forwards; }
    .correct-pop-out::after {
      content: ''; position: absolute; top: 50%; left: 50%;
      width: 150%; height: 150%; border-radius: 50%;
      background-image: radial-gradient(circle, white 10%, transparent 10%),
                        radial-gradient(circle, white 10%, transparent 10%);
      background-position: 0% 0%, 100% 100%;
      background-size: 50% 50%, 50% 50%; background-repeat: no-repeat;
      transform: translate(-50%, -50%) scale(0); opacity: 0;
      animation: diamond-shine 0.8s ease-out forwards; pointer-events: none;
    }
    @keyframes incorrect-shake { 0%,100%{transform:translateX(0);}25%{transform:translateX(-5px);}75%{transform:translateX(5px);} }
    @keyframes popOut {0%{transform:scale(1);}50%{transform:scale(1.5);}100%{transform:scale(1.5);} }
    @keyframes diamond-shine {0%{transform:translate(-50%,-50%) scale(0);opacity:0;}50%{transform:translate(-50%,-50%) scale(1);opacity:1;}100%{transform:translate(-50%,-50%) scale(1.5);opacity:0;}}
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4 overflow-hidden">
  <div id="game-container" class="w-full max-w-lg p-6 bg-white rounded-3xl shadow-xl flex flex-col items-center space-y-8">
    <h1 id="game-title" class="text-4xl sm:text-5xl font-bold text-center text-gray-800">
      Find the <span id="color-name" class="text-blue-500">...</span>
    </h1>
    <div id="score-board" class="w-full text-center text-2xl font-bold text-gray-600">
      Score: <span id="score-count">0</span>
    </div>
    <div id="colors-grid" class="flex flex-wrap justify-center items-center gap-6 w-full"></div>
    <div id="message-box" class="min-h-16 w-full text-center">
      <p id="message-text" class="text-xl font-semibold hidden"></p>
    </div>
  </div>

<script>
  // ðŸŽ¨ Colors
  const allColors = [
    { name: 'Red', hex: '#ef4444' }, { name: 'Blue', hex: '#3b82f6' },
    { name: 'Green', hex: '#22c55e' }, { name: 'Yellow', hex: '#facc15' },
    { name: 'Purple', hex: '#a855f7' }, { name: 'Orange', hex: '#f97316' },
    { name: 'Pink', hex: '#ec4899' }, { name: 'Brown', hex: '#8a4b08' },
    { name: 'Gray', hex: '#9ca3af' }, { name: 'Black', hex: '#111827' },
    { name: 'White', hex: '#f9fafb' }, { name: 'Teal', hex: '#14b8a6' },
  ];
  const positiveFeedback = ['Excellent!', 'Great Job!', 'You are doing great!', 'Fantastic!', 'Super!'];
  const negativeFeedback = ['Oops, try again!', 'Not quite, give it another go!', 'You can do it!'];

  // ðŸ”Š Short sounds (only correct/wrong, no background music)
  const successSounds = [
    new Audio("https://assets.mixkit.co/active_storage/sfx/2851/2851-preview.mp3"), // ding
    new Audio("https://assets.mixkit.co/active_storage/sfx/3520/3520-preview.mp3"), // tada
    new Audio("https://assets.mixkit.co/active_storage/sfx/3521/3521-preview.mp3")  // bell
  ];
  const failSounds = [
    new Audio("https://assets.mixkit.co/active_storage/sfx/2566/2566-preview.mp3"), // buzz
    new Audio("https://assets.mixkit.co/active_storage/sfx/2745/2745-preview.mp3"), // error
    new Audio("https://assets.mixkit.co/active_storage/sfx/2746/2746-preview.mp3")  // fail beep
  ];

  successSounds.forEach(s => s.preload="auto");
  failSounds.forEach(s => s.preload="auto");

  function playRandomSound(list) {
    const sound = list[Math.floor(Math.random() * list.length)];
    try { sound.currentTime = 0; sound.play(); } catch(e) {}
  }

  // Game state
  let correctColor=null, previousColor=null, score=0;
  const COLORS_PER_LEVEL = [4,6,8,10,12];

  const speak = (text) => {
    if ('speechSynthesis' in window) {
      window.speechSynthesis.cancel();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.rate = 0.9;
      window.speechSynthesis.speak(utterance);
    }
  };

  const createColorButton = (color) => {
    const button=document.createElement('div');
    button.className="w-20 h-20 md:w-24 md:h-24 rounded-3xl shadow-md cursor-pointer transition-all bouncy-tap";
    button.style.backgroundColor=color.hex;
    button.dataset.colorName=color.name;
    return button;
  };
  const updateScoreDisplay = () => { document.getElementById('score-count').textContent=score; };

  const handleTap=(e)=>{
    const tapped=e.target.dataset.colorName;
    const msg=document.getElementById('message-text');
    const btn=e.target;
    if(tapped===correctColor.name){
      score++; playRandomSound(successSounds);
      const fb=positiveFeedback[Math.floor(Math.random()*positiveFeedback.length)];
      msg.textContent=fb; msg.classList.remove('hidden'); msg.style.color=correctColor.hex;
      speak(correctColor.name);
      setTimeout(()=>{ msg.classList.add('hidden'); setupNewRound(); updateScoreDisplay(); },1000);
    } else {
      score=0; playRandomSound(failSounds);
      const fb=negativeFeedback[Math.floor(Math.random()*negativeFeedback.length)];
      msg.textContent=fb; msg.classList.remove('hidden'); msg.style.color=correctColor.hex;
      speak(fb);
      setTimeout(()=>{ msg.classList.add('hidden'); updateScoreDisplay(); },800);
    }
  };

  const resetGame=()=>{document.getElementById('colors-grid').innerHTML='';correctColor=null;};
  const setupNewRound=()=>{
    resetGame();
    const display=document.getElementById('color-name');
    const num=COLORS_PER_LEVEL[Math.min(score, COLORS_PER_LEVEL.length-1)];
    const shuffled=[...allColors].sort(()=>Math.random()-0.5);
    let newColor; do{newColor=shuffled[0];}while(newColor.name===previousColor?.name);
    correctColor=newColor; previousColor=correctColor;
    const round=shuffled.slice(0,num);
    if(!round.includes(correctColor)) round[0]=correctColor;
    round.sort(()=>Math.random()-0.5);
    display.textContent=correctColor.name; display.style.color=correctColor.hex;
    speak(`Find the color ${correctColor.name}`);
    const grid=document.getElementById('colors-grid');
    round.forEach(c=>{const b=createColorButton(c);b.addEventListener('click',handleTap);grid.appendChild(b);});
  };
  window.onload=()=>{setupNewRound();updateScoreDisplay();};
</script>
</body>
</html>
