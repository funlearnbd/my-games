<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fun Kids Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f9f9f9;
    margin: 0;
    padding: 0;
  }
  h1 { background: #ffcc00; margin:0; padding:15px; }
  #question { font-size: 1.5em; margin: 20px 0; }
  #game-area {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(120px,1fr));
    gap: 15px;
    padding: 10px;
    max-width: 700px;
    margin: auto;
  }
  .answer-box {
    background: #fff;
    border: 3px solid #ccc;
    border-radius: 15px;
    padding: 10px;
    cursor: pointer;
    transition: transform .2s;
  }
  .answer-box:hover { transform: scale(1.1); }
  .answer-box img {
    width: 100px; height: 100px; object-fit: contain;
  }
  #puzzle-container {
    margin: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
  }
  #puzzle-container img {
    width: 100px; height: 100px;
  }
  #message { font-size:1.3em; margin-top:15px; min-height: 1.5em; }
  #score { margin: 10px; font-weight: bold; }
  #controls { margin: 15px; }
  button {
    margin: 5px; padding: 10px 20px;
    font-size: 1em;
    border-radius: 10px;
    border: none;
    background: #ff9900;
    color: #fff; cursor: pointer;
  }
  button:hover { background: #e68a00; }
</style>
</head>
<body>
<h1>Fun Kids Game</h1>
<div id="score">Score: 0</div>
<div id="question"></div>
<div id="game-area"></div>
<div id="message"></div>
<div id="controls">
  <button onclick="newGame()">New Game</button>
  <button onclick="exitGame()">Exit Game</button>
</div>

<!-- Sounds -->
<audio id="success-sound" src="https://cdn.pixabay.com/download/audio/2021/09/01/audio_d90b40f19e.mp3?filename=success-1-6297.mp3"></audio>
<audio id="buzz-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_fa2f61cb34.mp3?filename=error-126627.mp3"></audio>

<script>
// === Cartoon image set ===
const items = [
  { name:"apple", src:"https://img.icons8.com/emoji/96/apple.png" },
  { name:"banana", src:"https://img.icons8.com/emoji/96/banana.png" },
  { name:"dog", src:"https://img.icons8.com/emoji/96/dog.png" },
  { name:"cat", src:"https://img.icons8.com/emoji/96/cat.png" },
  { name:"flower", src:"https://img.icons8.com/emoji/96/hibiscus.png" },
  { name:"star", src:"https://img.icons8.com/emoji/96/star.png" },
  { name:"grapes", src:"https://img.icons8.com/emoji/96/grapes.png" },
  { name:"cherry", src:"https://img.icons8.com/emoji/96/cherries.png" },
  { name:"car", src:"https://img.icons8.com/emoji/96/red-car.png" },
  { name:"ball", src:"https://img.icons8.com/emoji/96/soccer-ball.png" }
];

let score=0, correctAnswer="", gameCount=0, currentMode="";

const questionDisplay=document.getElementById("question");
const gameArea=document.getElementById("game-area");
const messageDisplay=document.getElementById("message");
const scoreDisplay=document.getElementById("score");

// speak helper
function speak(text){
  const u=new SpeechSynthesisUtterance(text);
  u.rate=1.1;
  speechSynthesis.speak(u);
}

// shuffle helper
function shuffle(a){ for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} }

// new game
function newGame(){
  score=0; gameCount=0;
  scoreDisplay.textContent="Score: 0";
  newRound();
}
function exitGame(){
  window.location.href="index.html";
}

// main round
function newRound(){
  gameCount++;
  gameArea.innerHTML="";
  messageDisplay.textContent="";
  
  if(gameCount%3===1) generateSelect();
  else if(gameCount%3===2) generateMissing();
  else generateDifferent();
}

// === Select Mode ===
function generateSelect(){
  currentMode="select";
  const item=items[Math.floor(Math.random()*items.length)];
  correctAnswer=item.src;
  questionDisplay.textContent="Find the "+item.name+"!";
  speak(questionDisplay.textContent);
  let options=[item];
  while(options.length<6){
    const it=items[Math.floor(Math.random()*items.length)];
    if(!options.includes(it)) options.push(it);
  }
  shuffle(options);
  options.forEach(opt=>{
    const box=document.createElement("div"); box.className="answer-box";
    const img=document.createElement("img"); img.src=opt.src;
    box.appendChild(img);
    box.onclick=()=>checkAnswer(opt.src, box, item);
    gameArea.appendChild(box);
  });
}

// === Missing Piece ===
function generateMissing(){
  currentMode="missing";
  const item=items[Math.floor(Math.random()*items.length)];
  correctAnswer=item.src;
  questionDisplay.textContent="Find the missing "+item.name+"!";
  speak(questionDisplay.textContent);
  
  // Puzzle container
  const puzzle=document.createElement("div");
  puzzle.id="puzzle-container";
  const placeholder=document.createElement("div");
  placeholder.style.width="100px"; placeholder.style.height="100px";
  placeholder.style.border="2px dashed #aaa";
  puzzle.appendChild(placeholder);
  gameArea.appendChild(puzzle);
  
  // Options
  let options=[item];
  while(options.length<3){
    const it=items[Math.floor(Math.random()*items.length)];
    if(!options.includes(it)) options.push(it);
  }
  shuffle(options);
  options.forEach(opt=>{
    const box=document.createElement("div"); box.className="answer-box";
    const img=document.createElement("img"); img.src=opt.src;
    box.appendChild(img);
    box.onclick=()=>{
      if(opt.src===correctAnswer){
        placeholder.innerHTML="<img src='"+opt.src+"' width='100' height='100'>";
        checkAnswer(opt.src, box, item);
      } else {
        checkAnswer(opt.src, box, item);
      }
    };
    gameArea.appendChild(box);
  });
}

// === Find Different ===
function generateDifferent(){
  currentMode="different";
  const same=items[Math.floor(Math.random()*items.length)];
  let different; do{ different=items[Math.floor(Math.random()*items.length)]; }while(different===same);
  correctAnswer=different.src;
  questionDisplay.textContent="Find the different item!";
  speak(questionDisplay.textContent);
  
  let options=[different];
  for(let i=0;i<5;i++) options.push(same);
  shuffle(options);
  options.forEach(opt=>{
    const box=document.createElement("div"); box.className="answer-box";
    const img=document.createElement("img"); img.src=opt.src;
    box.appendChild(img);
    box.onclick=()=>checkAnswer(opt.src, box, different);
    gameArea.appendChild(box);
  });
}

// === Check Answer ===
function checkAnswer(src, box, item){
  if(src===correctAnswer){
    messageDisplay.textContent="✅ Correct!";
    document.getElementById("success-sound").play();
    score++; scoreDisplay.textContent="Score: "+score;
    speak("Correct!");
    setTimeout(newRound,1200);
  } else {
    messageDisplay.textContent="❌ Try again!";
    document.getElementById("buzz-sound").play();
    speak("Try again!");
  }
}

// start game
newGame();
</script>
</body>
</html>
