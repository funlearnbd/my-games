<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color & Pattern Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f0f8ff;
    }
    h1 {
      margin-top: 20px;
      font-size: 28px;
      color: #333;
    }
    #question {
      font-size: 22px;
      margin: 20px 0;
      color: #444;
    }
    #grid {
      display: grid;
      grid-template-columns: repeat(2, 120px);
      gap: 15px;
      justify-content: center;
      margin: 20px 0;
    }
    .answer-box {
      width: 120px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      border: 2px solid #333;
      border-radius: 12px;
      background: white;
      cursor: pointer;
      user-select: none;
    }
    .answer-box.dragging {
      opacity: 0.5;
    }
    #drop-zone {
      margin: 20px auto;
      width: 200px;
      height: 100px;
      border: 2px dashed #666;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      border-radius: 12px;
      color: #666;
    }
    #message {
      font-size: 20px;
      margin-top: 10px;
      height: 28px;
      color: #333;
    }
    #score {
      font-size: 18px;
      margin: 10px;
      color: #444;
    }
  </style>
</head>
<body>
  <h1>Color & Pattern Game</h1>
  <div id="question">Loading...</div>
  <div id="grid"></div>
  <div id="drop-zone">Drag & Drop Answer Here</div>
  <div id="message"></div>
  <div id="score">Score: 0</div>

  <audio id="success-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="buzz-sound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

  <script>
    const colors = ["Red", "Blue", "Green", "Yellow", "Orange", "Purple"];
    const patterns = ["Stripes", "Dots", "Waves", "Zigzag", "Checks"];
    let correctAnswer = "";
    let score = 0;

    const questionDisplay = document.getElementById('question');
    const grid = document.getElementById('grid');
    const dropZone = document.getElementById('drop-zone');
    const messageDisplay = document.getElementById('message');
    const scoreDisplay = document.getElementById('score');

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function newRound() {
      const type = Math.random() < 0.5 ? "color" : "pattern";

      if (type === "color") {
        const color = colors[Math.floor(Math.random() * colors.length)];
        correctAnswer = color;
        questionDisplay.textContent = `Pick the color: ${color}`;
        renderOptions([...colors]);
      } else {
        const pattern = patterns[Math.floor(Math.random() * patterns.length)];
        correctAnswer = pattern;
        questionDisplay.textContent = `Pick the pattern: ${pattern}`;
        renderOptions([...patterns]);
      }
    }

    function renderOptions(options) {
      grid.innerHTML = "";
      shuffleArray(options);
      options.forEach(opt => {
        const box = document.createElement("div");
        box.className = "answer-box";
        box.textContent = opt;
        box.draggable = true;

        box.onclick = () => checkAnswer(opt);

        box.addEventListener("dragstart", e => {
          box.classList.add("dragging");
          e.dataTransfer.setData("text/plain", opt);
        });
        box.addEventListener("dragend", () => {
          box.classList.remove("dragging");
        });

        grid.appendChild(box);
      });
    }

    function checkAnswer(choice) {
      if (choice === correctAnswer) {
        document.getElementById("success-sound").play();
        score++;
        scoreDisplay.textContent = `Score: ${score}`;
        messageDisplay.textContent = "✅ Correct!";
        setTimeout(() => {
          messageDisplay.textContent = "";
          newRound();
        }, 1000);
      } else {
        document.getElementById("buzz-sound").play();
        messageDisplay.textContent = "❌ Try again!";
      }
    }

    dropZone.addEventListener("dragover", e => e.preventDefault());
    dropZone.addEventListener("drop", e => {
      e.preventDefault();
      checkAnswer(e.dataTransfer.getData("text/plain"));
    });

    newRound();
  </script>
</body>
</html>
