<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logic Quest</title>
<style>
body {
    margin:0; padding:0;
    font-family:'Poppins', sans-serif;
    background:#f0f8ff;
    display:flex; justify-content:center; align-items:center;
    flex-direction:column; min-height:100vh;
}
.game-container {
    background:white; padding:20px; border-radius:20px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
    width:90%; max-width:700px;
}
h1 {text-align:center; color:#0984e3; font-size:2.5rem;}
#clue {font-size:1.5rem; text-align:center; margin:10px 0;}
#grid {display:grid; gap:10px; justify-content:center; margin:15px 0;}
#grid img {
    width:100px; height:100px; cursor:pointer; border-radius:15px;
    border:2px solid #ccc; transition:transform 0.2s;
}
#grid img:hover {transform:scale(1.05);}
#message {font-size:1.2rem; text-align:center; height:30px; margin:10px 0;}
button {padding:10px 20px; margin:10px; border:none; border-radius:20px; cursor:pointer; font-size:1rem;}
#exitBtn {background:#e74c3c; color:white;}
#newBtn {background:#00b894; color:white;}
</style>
</head>
<body>
<div class="game-container">
<h1>Logic Quest</h1>
<div id="clue"></div>
<div id="grid"></div>
<div id="message"></div>
<div style="text-align:center;">
<button id="newBtn">New Game</button>
<button id="exitBtn">Exit Game</button>
</div>
<audio id="successSound" src=""></audio>
<audio id="failSound" src=""></audio>
</div>

<script>
// ---------- IMAGE DATA (Base64) ----------
const items = [
{ name:"Apple", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Banana", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Grapes", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Cherry", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Pineapple", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Dog", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Cat", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Rabbit", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Bird", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Fish", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Ball", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Car", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Train", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Teddy", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Flower", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Sun", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Star", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
{ name:"Rainbow", src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..." },
// Emojis for faces
{ name:"Happy Face", emoji:"üòÄ" },
{ name:"Sad Face", emoji:"üò¢" },
{ name:"Laughing Face", emoji:"üòÇ" },
{ name:"Angry Face", emoji:"üò°" },
{ name:"Celebrating Face", emoji:"ü•≥" },
{ name:"Winking Face", emoji:"üòâ" },
{ name:"Sleeping Face", emoji:"üò¥" }
];

// ---------- SOUND DATA ----------
const itemSounds = {
"Apple":"data:audio/mp3;base64,//uQxAA...",
"Banana":"data:audio/mp3;base64,//uQxAA...",
"Dog":"data:audio/mp3;base64,//uQxAA..."
// Add more for each item as desired
};

// ---------- GAME STATE ----------
let currentModeIndex = 0;
let currentRound = 0;
const modes = ["findItem","findFace","different","missing","shadow","oddOne","sequence","color"];
let laps = 100;
let tutorialRounds = 2;

const clueDiv = document.getElementById('clue');
const gridDiv = document.getElementById('grid');
const messageDiv = document.getElementById('message');
const successSound = document.getElementById('successSound');
const failSound = document.getElementById('failSound');
const newBtn = document.getElementById('newBtn');
const exitBtn = document.getElementById('exitBtn');

newBtn.onclick = startGame;
exitBtn.onclick = ()=>{window.location.href="index.html";};

// ---------- UTILS ----------
function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];} return arr;}
function speak(text){if(window.speechSynthesis){const u=new SpeechSynthesisUtterance(text);u.lang='en-US';u.volume=1;u.rate=0.9;u.pitch=1;window.speechSynthesis.speak(u);}}

// ---------- GAME FUNCTIONS ----------
function startGame(){
    currentModeIndex=0; currentRound=0;
    nextRound();
}

function nextRound(){
    if(currentRound>=laps){clueDiv.textContent="üéâ Congratulations! You completed all rounds!";gridDiv.innerHTML="";messageDiv.textContent="";return;}
    const mode=modes[currentModeIndex];
    currentModeIndex=(currentModeIndex+1)%modes.length;
    currentRound++;
    messageDiv.textContent="";
    if(mode==="findItem") gameFindItem();
    else if(mode==="findFace") gameFindFace();
    else if(mode==="different") gameDifferent();
    else if(mode==="missing") gameMissing();
    else if(mode==="shadow") gameShadow();
    else if(mode==="oddOne") gameOddOne();
    else if(mode==="sequence") gameSequence();
    else if(mode==="color") gameColor();
}

// ---------- GAME MODES ----------
function gameFindItem(){
    const itemPool=items.filter(i=>i.src || i.emoji);
    const correct=itemPool[Math.floor(Math.random()*itemPool.length)];
    let options=shuffle(itemPool).slice(0,5);
    if(!options.includes(correct)) options[0]=correct;
    renderGrid(options, correct,"Find the "+correct.name);
}

function gameFindFace(){
    const faces=items.filter(i=>i.emoji);
    const correct=faces[Math.floor(Math.random()*faces.length)];
    renderGrid(faces,correct,"Find the "+correct.name);
}

function gameDifferent(){
    const pool=shuffle(items.filter(i=>i.src));
    const same=pool.slice(0,5);
    const diff=pool[5];
    let options=shuffle([...same,diff]);
    renderGrid(options,diff,"Find the different item");
}

function gameMissing(){
    const pool=shuffle(items.filter(i=>i.src)).slice(0,4);
    const missing=pool.pop();
    renderGrid(pool,missing,"Find the missing piece",true);
}

function gameShadow(){
    const pool=shuffle(items.filter(i=>i.src));
    const correct=pool[0];
    clueDiv.innerHTML=`<img src="${correct.src}" style="filter:brightness(0) invert(1); width:100px; height:100px;">`; 
    let options=shuffle(pool.slice(0,5));
    if(!options.includes(correct)) options[0]=correct;
    renderGrid(options,correct,"Match the shadow");
}

function gameOddOne(){
    const pool=shuffle(items.filter(i=>i.src));
    const odd=pool[0]; const same=pool.slice(1,4);
    let options=shuffle([odd,...same]);
    renderGrid(options,odd,"Find the odd one out");
}

function gameSequence(){
    const pool=shuffle(items.filter(i=>i.src)).slice(0,2);
    const correct=pool[0];
    renderGrid([...pool,correct],correct,"Complete the sequence");
}

function gameColor(){
    const pool=shuffle(items.filter(i=>i.src)).slice(0,5);
    const correct=pool[0];
    renderGrid(pool,correct,"Find the same color as this one");
}

// ---------- RENDER GRID ----------
function renderGrid(options,correct,clueText,missing=false){
    clueDiv.textContent=clueText;
    gridDiv.innerHTML="";
    options.forEach(opt=>{
        const img=document.createElement("img");
        if(opt.src) img.src=opt.src;
        else img.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe..."; // fallback for emoji as image
        img.alt=opt.name || opt.emoji;
        img.onclick=()=>{
            if(opt===correct){
                successSound.play();
                messageDiv.textContent="‚úÖ Correct!";
                if(itemSounds[correct.name]){new Audio(itemSounds[correct.name]).play();}
                if(missing) gridDiv.innerHTML=`<img src="${correct.src}" style="width:100px;height:100px;border-radius:15px;">`;
                speak("Great job!");
                setTimeout(nextRound,1200);
            } else {
                failSound.play();
                messageDiv.textContent="‚ùå Try again!";
                speak("Try again!");
            }
        };
        gridDiv.appendChild(img);
    });
}

// ---------- START ----------
startGame();
</script>
</body>
</html>
