<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logic Quest</title>
<style>
/* --- styles same as your version, omitted for brevity --- */
</style>
</head>
<body>
<div id="game-container" class="game-container">
    <h1>Logic Quest</h1>
    <div id="jargon"></div>
    <div id="instructions"></div>
    <div id="clue-display"></div>
    <div id="pattern-display"></div>
    <div id="answer-grid"></div>
    <div id="drag-drop-container" class="drag-drop-container" style="display:none;"></div>
    <div id="message"></div>
    <div id="score">Score: 0</div>
    <div class="button-group">
        <button id="restart-button">New Game</button>
        <button id="exit-button">Exit Game</button>
    </div>
</div>

<audio id="success-sound" src="https://www.soundjay.com/button/button-3.mp3" preload="auto"></audio>
<audio id="buzz-sound" src="https://www.soundjay.com/buttons/beep-07.mp3" preload="auto"></audio>

<script>
const colors = ['red','blue','green','yellow','purple','orange','black','brown'];
const shapes = ['circle','square','heart'];

const coloredEmojis = {
    'circle': ['🔴','🔵','🟢','🟡','🟣','🟠','⚫','🟤'],
    'square': ['🟥','🟦','🟩','🟨','🟪','🟧','⬛','🟫'],
    'heart': ['❤️','💙','💚','💛','💜','🧡','🖤','🤎']
};
const uniqueEmojis = {
    'happy face':'😀','sad face':'😩','laughing face':'😂','angry face':'😠',
    'celebrating face':'🥳','shocked face':'🤯','winking face':'😉','sleeping face':'😴',
    'cold face':'🥶','light bulb':'💡','bell':'🔔'
};

const jargonList=["Cogito, ergo sum.","Semper ad astra.","Scientia potentia est.","Carpe diem.","Veritas vos liberabit."];

let currentLevel=1, score=0, correctAnswer='';

const clueDisplay=document.getElementById('clue-display');
const patternDisplay=document.getElementById('pattern-display');
const answerGrid=document.getElementById('answer-grid');
const dragDropContainer=document.getElementById('drag-drop-container');
const messageDisplay=document.getElementById('message');
const scoreDisplay=document.getElementById('score');
const restartButton=document.getElementById('restart-button');
const exitButton=document.getElementById('exit-button');
const successSound=document.getElementById('success-sound');
const buzzSound=document.getElementById('buzz-sound');
const instructionsDisplay=document.getElementById('instructions');
const jargonDisplay=document.getElementById('jargon');

function newRound(){
    messageDisplay.textContent='';
    patternDisplay.innerHTML='';
    answerGrid.innerHTML='';
    dragDropContainer.style.display='none';
    if(currentLevel>30){ messageDisplay.textContent="🎉 Completed all levels!"; return;}
    const types=['find-different','find-matching','pattern','drag-drop'];
    const type=types[(currentLevel-1)%types.length];
    if(type==='find-different') setupFindDifferent();
    if(type==='find-matching') setupFindMatching();
    if(type==='pattern') setupPattern();
    if(type==='drag-drop') setupDragDrop();
    instructionsDisplay.textContent=`Level ${currentLevel}`;
    jargonDisplay.textContent=jargonList[Math.floor(Math.random()*jargonList.length)];
}
function setupFindDifferent(){
    const pool=[...Object.values(coloredEmojis).flat(),...Object.values(uniqueEmojis)];
    const common=pool[Math.floor(Math.random()*pool.length)];
    let diff; do{diff=pool[Math.floor(Math.random()*pool.length)];}while(diff===common);
    const options=Array(8).fill(common); options.splice(Math.floor(Math.random()*9),0,diff);
    correctAnswer=diff;
    renderGrid(options);
    clueDisplay.textContent="Find the one that is different.";
}
function setupFindMatching(){
