<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kids Logic Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Comic Sans MS', sans-serif;
      background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      overflow: hidden;
    }
    .container {
      background: #ffffffdd;
      border-radius: 1.5rem;
      padding: 2rem;
      max-width: 90%;
      width: 600px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      text-align: center;
    }
    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
    }
    .emoji-item {
      font-size: 3rem;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 0.75rem;
      transition: transform 0.3s, background-color 0.3s;
    }
    .emoji-item:hover {
      transform: scale(1.1);
      background-color: #fef3c7;
    }
    .emoji-item.correct {
      animation: sparkle 1s ease-out;
    }
    .emoji-item.incorrect {
      animation: shake 0.5s ease-out;
    }
    @keyframes sparkle {
      0% { transform: scale(1); box-shadow: 0 0 0 0 gold; }
      50% { transform: scale(1.3); box-shadow: 0 0 20px 10px rgba(255,215,0,0.5); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 transparent; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    .title { font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem; }
    .instructions { font-size: 1.2rem; color: #374151; }
    .message-box {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff8dc;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      z-index: 100;
    }
    .message-box button {
      margin-top: 1rem;
      background: #10b981;
      color: white;
      font-weight: bold;
      padding: 0.5rem 1.5rem;
      border-radius: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container" id="game-container">
    <h1 class="text-3xl font-bold">Welcome to Logic Game 🎉</h1>
    <p class="mt-2 text-lg">Tap start and listen carefully!</p>
    <button id="start-btn" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg">Start Game</button>
  </div>

  <audio id="bg-music" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2a9b9d347d.mp3?filename=kid-music-110271.mp3" type="audio/mpeg">
  </audio>

  <script>
    const gameContainer = document.getElementById('game-container');
    const startBtn = document.getElementById('start-btn');
    const bgMusic = document.getElementById('bg-music');

    const allEmojis = [
      '🍎','🍌','🍓','🍉','🍇','🍍','🥭','🍒','🍑',
      '🐶','🐱','🐭','🐰','🐻','🐼','🦁','🐮','🐸',
      '🚗','🚌','🚓','🚑','🚒','🚜','🚀','✈️','🚲',
      '⚽','🏀','🏈','🎾','🥎','🏐','🎸','🥁','🎹'
    ];
    const feedback = ['Great job!','Well done!','Excellent!','You are doing great!','Fantastic!'];

    let currentTarget = '';

    function speak(text) {
      const synth = window.speechSynthesis;
      const utter = new SpeechSynthesisUtterance(text);
      utter.rate = 0.8; // slower for kids
      utter.pitch = 1;
      synth.speak(utter);
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function startGame() {
      bgMusic.volume = 0.2;
      bgMusic.play();
      nextRound();
    }

    function nextRound() {
      gameContainer.innerHTML = '';
      const chosen = shuffle([...allEmojis]).slice(0, 6);
      currentTarget = chosen[Math.floor(Math.random() * chosen.length)];

      const title = document.createElement('h1');
      title.className = 'title';
      title.innerText = 'Find the Emoji!';
      const instructions = document.createElement('p');
      instructions.className = 'instructions';
      instructions.innerText = `Tap the ${currentTarget}`;
      gameContainer.appendChild(title);
      gameContainer.appendChild(instructions);

      speak(`Can you find the ${currentTarget}?`);

      const grid = document.createElement('div');
      grid.className = 'emoji-grid';
      chosen.forEach(e => {
        const div = document.createElement('div');
        div.className = 'emoji-item';
        div.innerText = e;
        div.onclick = () => checkAnswer(div, e);
        grid.appendChild(div);
      });
      gameContainer.appendChild(grid);
    }

    function checkAnswer(div, emoji) {
      if (emoji === currentTarget) {
        div.classList.add('correct');
        const say = feedback[Math.floor(Math.random() * feedback.length)];
        speak(say);
        setTimeout(() => {
          showMessage('Correct! 🎉', 'Next Round', nextRound);
        }, 2000);
      } else {
        div.classList.add('incorrect');
        speak('Try again');
        setTimeout(() => div.classList.remove('incorrect'), 800);
      }
    }

    function showMessage(text, btnText, callback) {
      const box = document.createElement('div');
      box.className = 'message-box';
      box.innerHTML = `<p class="text-xl">${text}</p><button>${btnText}</button>`;
      document.body.appendChild(box);
      box.querySelector('button').onclick = () => {
        box.remove();
        callback();
      };
    }

    startBtn.onclick = startGame;
  </script>
</body>
</html>
