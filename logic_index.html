<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kids Logic Game</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    margin: 0; padding: 0;
    background: linear-gradient(135deg, #ffe6f0 0%, #b3e5fc 50%, #c8e6c9 100%);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    overflow-x: hidden;
  }
  .container {
    max-width: 600px;
    width: 95%;
    background: rgba(255,255,255,0.95);
    border-radius: 20px;
    padding: 15px;
    margin: 20px 0;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }
  h1 { font-size: 2rem; color: #d81b60; margin: 5px 0; }
  .instructions { font-size: 1.3rem; color: #0288d1; margin: 10px 0; }
  .emoji-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
    gap: 10px;
    justify-items: center;
    margin-top: 10px;
  }
  .emoji-item {
    width: 90px; height: 90px;
    border: 3px solid #333;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s, box-shadow 0.3s;
    font-size: 3rem;
    background: white;
  }
  .emoji-item:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }
  .emoji-item.correct { animation: glow 1s ease-out; }
  .emoji-item.incorrect { animation: shake 0.5s ease-out; }
  @keyframes glow {0%,100%{box-shadow:0 0 0px #ff0;transform:scale(1);}50%{box-shadow:0 0 20px 5px #ff0;transform:scale(1.2);}}
  @keyframes shake {0%,100%{transform:translateX(0);}25%{transform:translateX(-8px);}75%{transform:translateX(8px);}}
  .start-btn, .exit-btn { 
    background: #ff4081; 
    color: #fff; 
    border: none; 
    border-radius: 12px; 
    padding: 12px 20px; 
    font-size: 1.2rem; 
    cursor: pointer; 
    margin: 5px; 
    font-weight: bold;
    transition: background 0.3s;
  }
  .start-btn:hover, .exit-btn:hover { background: #e91e63; transform: scale(1.05); }
  .progress-bar-container { width: 90%; height: 15px; background: #ccc; border-radius: 8px; margin: 10px auto; }
  .progress-bar { width: 0%; height: 100%; background: #76ff03; border-radius: 8px; transition: width 0.5s; }
  .tutorial {
    display: none; /* Tutorials disabled for kids */
  }
</style>
</head>
<body>
<div class="container" id="game-container">
  <h1>Fun Logic Game üåü</h1>
  <p class="instructions">Press Start to begin!</p>
  <button class="start-btn" id="start-btn">Start Game</button>
  <button class="exit-btn" onclick="exitGame()">Exit</button>
  <div class="progress-bar-container"><div class="progress-bar" id="progress-bar"></div></div>
</div>

<script>
const startBtn = document.getElementById('start-btn');
const gameContainer = document.getElementById('game-container');
const progressBar = document.getElementById('progress-bar');

// Using emojis instead of external images for better reliability
const images = [
  {name:'Dog', emoji:'üê∂'},
  {name:'Cat', emoji:'üê±'},
  {name:'Cow', emoji:'üêÑ'},
  {name:'Apple', emoji:'üçé'},
  {name:'Banana', emoji:'üçå'},
  {name:'Car', emoji:'üöó'},
  {name:'Bus', emoji:'üöå'},
  {name:'Plane', emoji:'‚úàÔ∏è'},
  {name:'Fish', emoji:'üêü'},
  {name:'Bird', emoji:'üê¶'},
  {name:'Orange', emoji:'üçä'},
  {name:'Train', emoji:'üöÇ'},
  {name:'Bike', emoji:'üö≤'},
  {name:'Tree', emoji:'üå≥'},
  {name:'Flower', emoji:'üå∏'},
  {name:'Star', emoji:'‚≠ê'}
];

const feedback = ['Great job! üåü', 'Awesome! üëè', 'Excellent! üéâ', 'You\'re amazing! üí´', 'Fantastic! üèÜ'];
let level = 0;
const maxLevels = 10;

function speak(text) {
  if ('speechSynthesis' in window) {
    const utter = new SpeechSynthesisUtterance(text);
    utter.rate = 0.8;
    utter.pitch = 1.2;
    utter.volume = 0.7;
    speechSynthesis.speak(utter);
  }
}

function shuffle(array){ 
  const newArray = [...array];
  return newArray.sort(()=>Math.random()-0.5); 
}

function exitGame(){ 
  if(confirm('Are you sure you want to exit the game?')) {
    location.reload();
  }
}

function showTutorial(type, callback){
  const overlay = document.createElement('div');
  overlay.className='tutorial';
  
  let tutorialText = '';
  if(type==='findTarget') tutorialText = 'üéØ Look carefully!<br>Tap the emoji that matches the word shown above.';
  if(type==='findMissing') tutorialText = 'üîç Find the missing piece!<br>Choose the correct emoji to complete the pattern.';
  if(type==='findDifferent') tutorialText = 'üëÄ Spot the odd one out!<br>Tap the emoji that is different from the others.';
  
  overlay.innerHTML = tutorialText;
  const btn = document.createElement('button'); 
  btn.innerText='Got it! Let\'s play! üéÆ'; 
  btn.onclick=()=>{ 
    document.body.removeChild(overlay); 
    callback(); 
  };
  overlay.appendChild(btn);
  document.body.appendChild(overlay);
}

function startGame(){
  level = 0; 
  progressBar.style.width='0%'; 
  nextRound();
}

function nextRound(){
  gameContainer.innerHTML = `
    <h1>Fun Logic Game üåü</h1>
    <button class="exit-btn" onclick="exitGame()">Exit</button>
  `;
  
  level++;
  if(level > maxLevels){ 
    gameContainer.innerHTML += `
      <p class="instructions">üéâ Congratulations! You completed all levels! üéâ</p>
      <button class="start-btn" onclick="startGame()">Play Again</button>
    `;
    speak('Congratulations, you won! You completed all levels!');
    progressBar.style.width='100%';
    return;
  }
  
  progressBar.style.width = `${(level/maxLevels)*100}%`;
  
  let type;
  if(level <= 3) type = 'findTarget';
  else if(level <= 6) type = 'findMissing';
  else type = 'findDifferent';
  
  if(level === 1 || level === 4 || level === 7){ 
    showTutorial(type, ()=>runRound(type)); 
  }
  else {
    runRound(type);
  }
}

function runRound(type){
  const grid = document.createElement('div'); 
  grid.className='emoji-grid';
  
  if(type==='findTarget'){
    let chosen = shuffle(images).slice(0, 4);
    let target = chosen[Math.floor(Math.random() * chosen.length)];
    
    const instructions = document.createElement('p');
    instructions.className = 'instructions';
    instructions.innerHTML = `Find the <strong>${target.name}</strong>!`;
    gameContainer.appendChild(instructions);
    
    speak(`Find the ${target.name}!`);
    
    chosen.forEach(img=>{
      const div = document.createElement('div'); 
      div.className='emoji-item';
      div.innerHTML = img.emoji;
      div.onclick = () => checkAnswer(div, img.name, target.name);
      grid.appendChild(div);
    });
    
  } else if(type==='findMissing'){
    let chosen = shuffle(images).slice(0, 4);
    let blankIndex = Math.floor(Math.random() * 4);
    let missing = chosen[blankIndex];
    
    const instructions = document.createElement('p');
    instructions.className = 'instructions';
    instructions.innerHTML = 'Find the missing emoji!';
    gameContainer.appendChild(instructions);
    
    speak('Find the missing emoji!');
    
    chosen.forEach((img, index)=>{
      const div = document.createElement('div'); 
      div.className='emoji-item';
      div.innerHTML = index === blankIndex ? '‚ùì' : img.emoji;
      if(index === blankIndex) div.style.backgroundColor = '#ffeb3b';
      grid.appendChild(div);
    });
    
    gameContainer.appendChild(grid);
    
    const optionGrid = document.createElement('div'); 
    optionGrid.className='emoji-grid';
    optionGrid.style.marginTop = '20px';
    
    let options = shuffle([missing, ...shuffle(images.filter(i=>i.name!==missing.name)).slice(0, 2)]);
    options.forEach(img=>{
      const div = document.createElement('div'); 
      div.className='emoji-item';
      div.innerHTML = img.emoji;
      div.onclick = () => {
        checkAnswer(div, img.name, missing.name);
        if(img.name === missing.name) {
          grid.children[blankIndex].innerHTML = missing.emoji;
          grid.children[blankIndex].style.backgroundColor = '#4caf50';
        }
      };
      optionGrid.appendChild(div);
    });
    gameContainer.appendChild(optionGrid);
    return; // Early return to avoid adding grid twice
    
  } else if(type==='findDifferent'){
    let same = images[Math.floor(Math.random() * images.length)];
    let different = images.find(img => img.name !== same.name);
    let chosen = [same, same, same, different];
    chosen = shuffle(chosen);
    
    const instructions = document.createElement('p');
    instructions.className = 'instructions';
    instructions.innerHTML = 'Find the different emoji!';
    gameContainer.appendChild(instructions);
    
    speak('Find the different emoji!');
    
    chosen.forEach(img=>{
      const div = document.createElement('div'); 
      div.className='emoji-item';
      div.appendChild(createImageElement(img));
      div.onclick = () => checkAnswer(div, img.name, different.name);
      grid.appendChild(div);
    });
  }
  
  gameContainer.appendChild(grid);
}

function checkAnswer(div, answer, correct){
  // Disable all clicks temporarily
  const allItems = document.querySelectorAll('.emoji-item');
  allItems.forEach(item => item.style.pointerEvents = 'none');
  
  if(answer === correct){ 
    div.classList.add('correct'); 
    speak(feedback[Math.floor(Math.random() * feedback.length)]); 
    setTimeout(() => {
      allItems.forEach(item => item.style.pointerEvents = 'auto');
      nextRound();
    }, 1200);
  } else { 
    div.classList.add('incorrect'); 
    speak('Oops, try again!'); 
    setTimeout(() => {
      div.classList.remove('incorrect');
      allItems.forEach(item => item.style.pointerEvents = 'auto');
    }, 800);
  }
}

// Initialize the game
startBtn.onclick = startGame;

// Add some fun sound effects (optional - will work if browser supports it)
function playSound(type) {
  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
  const oscillator = audioContext.createOscillator();
  const gain = audioContext.createGain();
  
  oscillator.connect(gain);
  gain.connect(audioContext.destination);
  
  if(type === 'correct') {
    oscillator.frequency.value = 523.25; // C5
    gain.gain.setValueAtTime(0.1, audioContext.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
  } else if(type === 'incorrect') {
    oscillator.frequency.value = 220; // A3
    gain.gain.setValueAtTime(0.1, audioContext.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
  }
  
  oscillator.start(audioContext.currentTime);
  oscillator.stop(audioContext.currentTime + 0.5);
}

console.log('Kids Logic Game loaded successfully!');
</script>
</body>
</html>
