<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kids Logic Game</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%) !important;
    }
    .container {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 20px;
      max-width: 700px;
      width: 90%;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    h1 {
      margin: 0;
      color: #ff6600;
    }
    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .emoji-item {
      font-size: 4rem;
      background: #fef3c7;
      border-radius: 15px;
      cursor: pointer;
      padding: 15px;
      transition: transform 0.2s, background-color 0.2s;
    }
    .emoji-item:hover {
      transform: scale(1.15);
      background-color: #fde68a;
    }
    .emoji-item.correct {
      animation: sparkle 1s ease-out;
    }
    .emoji-item.incorrect {
      animation: shake 0.5s ease-out;
    }
    @keyframes sparkle {
      0% { transform: scale(1); box-shadow: 0 0 0 0 gold; }
      50% { transform: scale(1.3); box-shadow: 0 0 20px 10px rgba(255,215,0,0.6); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 transparent; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    .exit-btn {
      background: #ef4444;
      color: white;
      font-weight: bold;
      padding: 8px 16px;
      border-radius: 10px;
      margin-left: auto;
      cursor: pointer;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <div class="container" id="game-container">
    <div class="top-bar">
      <h1>Logic Game 🎉</h1>
      <button onclick="exitGame()" class="exit-btn">Exit</button>
    </div>
    <p>Tap start and listen carefully!</p>
    <button id="start-btn" style="padding:10px 20px; background:#3b82f6; color:white; border-radius:10px; font-size:1rem; font-weight:bold; cursor:pointer;">
      Start Game
    </button>
  </div>

  <!-- Background music -->
  <audio id="bg-music" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2a9b9d347d.mp3?filename=kid-music-110271.mp3" type="audio/mpeg">
  </audio>

  <script>
    const gameContainer = document.getElementById('game-container');
    const startBtn = document.getElementById('start-btn');
    const bgMusic = document.getElementById('bg-music');

    // Bigger and clearer emojis
    const allEmojis = [
      '🍎','🍌','🍉','🍇','🍒','🍓','🍍','🥭','🍑',
      '🐕','🐈','🐘','🐒','🐦','🐢','🦁','🐼','🦄','🐳','🦋',
      '🚗','🚌','🚓','🚑','🚒','🚜','🚀','✈️','🚲','🚂'
    ];
    const feedback = ['Great job!','Well done!','Excellent!','Fantastic!','You did it!'];

    let currentTarget = '';

    function speak(text) {
      const synth = window.speechSynthesis;
      const utter = new SpeechSynthesisUtterance(text);
      utter.rate = 0.8; // slower for kids
      utter.pitch = 1;
      synth.speak(utter);
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function startGame() {
      bgMusic.volume = 0.2;
      bgMusic.play().catch(()=>{}); // autoplay needs interaction
      nextRound();
    }

    function nextRound() {
      gameContainer.innerHTML = `
        <div class="top-bar">
          <h1>Logic Game 🎉</h1>
          <button onclick="exitGame()" class="exit-btn">Exit</button>
        </div>
      `;

      const chosen = shuffle([...allEmojis]).slice(0, 6);
      currentTarget = chosen[Math.floor(Math.random() * chosen.length)];

      const instructions = document.createElement('p');
      instructions.style.fontSize = "1.3rem";
      instructions.style.fontWeight = "bold";
      instructions.innerText = `Tap the ${currentTarget}`;
      gameContainer.appendChild(instructions);

      speak(`Can you find the ${currentTarget}?`);

      const grid = document.createElement('div');
      grid.className = 'emoji-grid';
      chosen.forEach(e => {
        const div = document.createElement('div');
        div.className = 'emoji-item';
        div.innerText = e;
        div.onclick = () => checkAnswer(div, e);
        grid.appendChild(div);
      });
      gameContainer.appendChild(grid);
    }

    function checkAnswer(div, emoji) {
      if (emoji === currentTarget) {
        div.classList.add('correct');
        const say = feedback[Math.floor(Math.random() * feedback.length)];
        speak(say);
        setTimeout(() => { nextRound(); }, 2000); // auto move next
      } else {
        div.classList.add('incorrect');
        speak('Try again');
        setTimeout(() => div.classList.remove('incorrect'), 800);
      }
    }

    function exitGame() {
      window.location.href = "index.html";
    }

    startBtn.onclick = startGame;
  </script>
</body>
</html>
