<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kids Logic Game</title>
<style>
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    margin: 0; padding: 0;
    background: linear-gradient(135deg, #ffe6f0 0%, #b3e5fc 50%, #c8e6c9 100%);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    overflow-x: hidden;
  }
  .container {
    max-width: 600px;
    width: 95%;
    background: rgba(255,255,255,0.95);
    border-radius: 20px;
    padding: 15px;
    margin: 20px 0;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }
  h1 { font-size: 2rem; color: #d81b60; margin: 5px 0; }
  .instructions { font-size: 1.3rem; color: #0288d1; margin: 10px 0; }
  .emoji-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
    gap: 10px;
    justify-items: center;
    margin-top: 10px;
  }
  .emoji-item {
    width: 90px; height: 90px;
    border: 3px solid #333;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .emoji-item img { max-width: 80%; max-height: 80%; }
  .emoji-item.correct { animation: glow 1s ease-out; }
  .emoji-item.incorrect { animation: shake 0.5s ease-out; }
  @keyframes glow {0%,100%{box-shadow:0 0 0px #ff0;transform:scale(1);}50%{box-shadow:0 0 20px 5px #ff0;transform:scale(1.2);}}
  @keyframes shake {0%,100%{transform:translateX(0);}25%{transform:translateX(-8px);}75%{transform:translateX(8px);}}
  .start-btn, .exit-btn { background: #ff4081; color: #fff; border: none; border-radius: 12px; padding: 12px 20px; font-size: 1.2rem; cursor: pointer; margin: 5px; font-weight: bold;}
  .start-btn:hover, .exit-btn:hover { background: #e91e63; }
  .progress-bar-container { width: 90%; height: 15px; background: #ccc; border-radius: 8px; margin: 10px auto; }
  .progress-bar { width: 0%; height: 100%; background: #76ff03; border-radius: 8px; transition: width 0.5s; }
  .tutorial {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.6); display:flex; justify-content:center; align-items:center;
    z-index: 1000; flex-direction: column; color:#fff; font-size:1.5rem; text-align:center; padding: 20px; box-sizing:border-box;
  }
  .tutorial button { margin-top: 20px; padding: 10px 20px; font-size:1.2rem; cursor:pointer; border-radius:10px; border:none; background:#ff4081; color:white; }
</style>
</head>
<body>
<div class="container" id="game-container">
  <h1>Fun Logic Game 🌟</h1>
  <p class="instructions">Press Start to begin!</p>
  <button class="start-btn" id="start-btn">Start Game</button>
  <button class="exit-btn" onclick="exitGame()">Exit</button>
  <div class="progress-bar-container"><div class="progress-bar" id="progress-bar"></div></div>
</div>

<audio id="bg-music" loop preload="auto">
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_2a9b9d347d.mp3" type="audio/mpeg">
</audio>

<script>
const startBtn = document.getElementById('start-btn');
const gameContainer = document.getElementById('game-container');
const progressBar = document.getElementById('progress-bar');
const bgMusic = document.getElementById('bg-music');

const images = [
  {name:'Dog', url:'https://cdn.pixabay.com/photo/2017/09/25/13/12/dog-2785074_1280.png'},
  {name:'Cat', url:'https://cdn.pixabay.com/photo/2017/11/09/21/41/cat-2934720_1280.jpg'},
  {name:'Cow', url:'https://cdn.pixabay.com/photo/2014/11/04/14/35/cow-516165_1280.jpg'},
  {name:'Apple', url:'https://cdn.pixabay.com/photo/2016/09/24/15/35/apple-1694160_1280.jpg'},
  {name:'Banana', url:'https://cdn.pixabay.com/photo/2016/03/05/19/02/bananas-1232842_1280.jpg'},
  {name:'Car', url:'https://cdn.pixabay.com/photo/2013/07/13/10/44/car-159282_1280.png'},
  {name:'Bus', url:'https://cdn.pixabay.com/photo/2013/07/13/10/44/bus-159278_1280.png'},
  {name:'Plane', url:'https://cdn.pixabay.com/photo/2013/07/12/17/01/airplane-153249_1280.png'}
];

const feedback = ['Great job! 🌟', 'Awesome!', 'Excellent!', 'You’re amazing!', 'Fantastic!'];
let level = 0;
const maxLevels = 10;

function speak(text) {
  const utter = new SpeechSynthesisUtterance(text);
  utter.rate = 0.7 + level*0.01;
  utter.pitch = 1.2;
  speechSynthesis.speak(utter);
}

function shuffle(array){ return array.sort(()=>Math.random()-0.5); }
function exitGame(){ bgMusic.pause(); window.location.href='index.html'; }

function showTutorial(type, callback){
  const overlay = document.createElement('div');
  overlay.className='tutorial';
  if(type==='findTarget') overlay.innerHTML = 'Look carefully!<br>Tap the image that matches the word.';
  if(type==='findMissing') overlay.innerHTML = 'Here is a missing item!<br>Choose the correct image to fill the blank.';
  if(type==='findDifferent') overlay.innerHTML = 'Spot the odd one out!<br>Tap the image that is different.';
  const btn = document.createElement('button'); btn.innerText='Got it!'; 
  btn.onclick=()=>{ document.body.removeChild(overlay); callback(); };
  overlay.appendChild(btn);
  document.body.appendChild(overlay);
}

function startGame(){
  bgMusic.volume=0.1; bgMusic.play().catch(()=>{});
  level = 0; progressBar.style.width='0%'; nextRound();
}

function nextRound(){
  gameContainer.innerHTML = `<h1>Fun Logic Game 🌟</h1><button class="exit-btn" onclick="exitGame()">Exit</button>`;
  level++;
  if(level>maxLevels){ 
    gameContainer.innerHTML += `<p class="instructions">You finished! 🎉</p><button class="start-btn" onclick="startGame()">Play Again</button>`;
    speak('Congratulations, you won!');
    progressBar.style.width='100%';
    return;
  }
  progressBar.style.width = `${(level/maxLevels)*100}%`;
  let type = level%3===1 ? 'findTarget' : (level%3===2 ? 'findMissing' : 'findDifferent');
  if(level<=3){ showTutorial(type, ()=>runRound(type)); }
  else runRound(type);
}

function runRound(type){
  const grid = document.createElement('div'); grid.className='emoji-grid';
  gameContainer.appendChild(grid);

  if(type==='findTarget'){
    let chosen = shuffle([...images]).slice(0,4);
    let target = chosen[Math.floor(Math.random()*chosen.length)];
    gameContainer.innerHTML += `<p class="instructions">Find the ${target.name}!</p>`;
    speak(`Find the ${target.name}!`);
    chosen.forEach(img=>{
      const div = document.createElement('div'); div.className='emoji-item';
      div.innerHTML=`<img src="${img.url}" alt="${img.name}">`;
      div.onclick=()=>checkAnswer(div,img.name,target.name);
      grid.appendChild(div);
    });
  }
  else if(type==='findMissing'){
    let chosen = shuffle([...images]).slice(0,4);
    let blankIndex = 3;
    let missing = chosen[blankIndex];
    chosen[blankIndex] = {name:'?',url:''};
    gameContainer.innerHTML += `<p class="instructions">Find the missing item!</p>`;
    speak('Find the missing item!');
    chosen.forEach(img=>{
      const div = document.createElement('div'); div.className='emoji-item';
      div.innerHTML=img.url?`<img src="${img.url}" alt="${img.name}">`:'❓';
      grid.appendChild(div);
    });
    const optionGrid = document.createElement('div'); optionGrid.className='emoji-grid';
    let options = shuffle([missing,...shuffle(images.filter(i=>i.name!==missing.name)).slice(0,2)]);
    options.forEach(img=>{
      const div = document.createElement('div'); div.className='emoji-item';
      div.innerHTML=`<img src="${img.url}" alt="${img.name}">`;
      div.onclick=()=>{
        checkAnswer(div,img.name,missing.name);
        grid.children[blankIndex].innerHTML=`<img src="${missing.url}" alt="${missing.name}">`;
      };
      optionGrid.appendChild(div);
    });
    gameContainer.appendChild(optionGrid);
  }
  else if(type==='findDifferent'){
    let same = shuffle([...images]).slice(0,1)[0];
    let chosen = [same,same,same,same];
    let diffIndex = Math.floor(Math.random()*chosen.length);
    let diff = shuffle(images.filter(i=>i.name!==same.name))[0];
    chosen[diffIndex] = diff;
    gameContainer.innerHTML += `<p class="instructions">Find the different item!</p>`;
    speak('Find the different item!');
    chosen.forEach(img=>{
      const div = document.createElement('div'); div.className='emoji-item';
      div.innerHTML=`<img src="${img.url}" alt="${img.name}">`;
      div.onclick=()=>checkAnswer(div,img.name,diff.name);
      grid.appendChild(div);
    });
  }
}

function checkAnswer(div,answer,correct){
  if(answer===correct){ div.classList.add('correct'); speak(feedback[Math.floor(Math.random()*feedback.length)]); setTimeout(nextRound,800);}
  else { div.classList.add('incorrect'); speak('Oops, try again!'); setTimeout(()=>div.classList.remove('incorrect'),800);}
}

startBtn.onclick=startGame;
</script>
</body>
</html>
