<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Kids Logic Game</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      margin: 0;
      padding: 0;
      height: 100vh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #ffe6f0 0%, #b3e5fc 50%, #c8e6c9 100%);
      overflow: hidden;
    }
    .container {
      background: rgba(255, 245, 157, 0.9); /* Soft yellow for kid-friendly feel */
      border-radius: 25px;
      padding: 15px;
      width: 100%;
      max-width: 500px;
      min-height: 100vh;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      box-sizing: border-box;
    }
    h1 {
      margin: 10px 0;
      color: #d81b60; /* Bright pink for fun */
      font-size: 2rem;
    }
    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
      gap: 12px;
      margin: 20px 10px;
    }
    .emoji-item {
      font-size: 4rem; /* Larger emojis */
      background: #fff3e0;
      border-radius: 15px;
      cursor: pointer;
      padding: 12px;
      transition: transform 0.2s, background-color 0.2s;
      aspect-ratio: 1/1;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .emoji-item:hover {
      transform: scale(1.25);
      background-color: #ffd54f;
    }
    .emoji-item.correct {
      animation: sparkle 1s ease-out;
    }
    .emoji-item.incorrect {
      animation: shake 0.5s ease-out;
    }
    @keyframes sparkle {
      0% { transform: scale(1); box-shadow: 0 0 0 0 #ffd700; }
      50% { transform: scale(1.3); box-shadow: 0 0 15px 8px rgba(255,215,0,0.7); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 transparent; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }
    .exit-btn, .start-btn {
      background: #ff4081;
      color: white;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      margin: 10px;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 10px;
    }
    .level-display {
      color: #0288d1;
      font-size: 1.2rem;
      font-weight: bold;
    }
    .instructions {
      font-size: 1.4rem;
      color: #d81b60;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container" id="game-container">
    <div class="top-bar">
      <h1>Fun Logic Adventure 🌟</h1>
      <button onclick="exitGame()" class="exit-btn">Exit</button>
    </div>
    <p class="level-display">Level: <span id="level">1</span></p>
    <p class="instructions">Tap start to play!</p>
    <button class="start-btn" id="start-btn">Start Game</button>
  </div>

  <audio id="bg-music" loop preload="auto">
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_2a9b9d347d.mp3" type="audio/mpeg">
  </audio>

  <script>
    const gameContainer = document.getElementById('game-container');
    const startBtn = document.getElementById('start-btn');
    const bgMusic = document.getElementById('bg-music');
    const levelDisplay = document.getElementById('level');

    // Clearer and kid-friendly emojis
    const allEmojis = [
      '😺', '🐶', '🐰', '🦒', '🦁', '🐘', '🦋', '🐝', '🦄', '🐢',
      '🍎', '🍊', '🍇', '🍓', '🍉', '🍍', '🍒', '🥕', '🥦', '🍰',
      '🚗', '🚒', '✈️', '🚀', '🚲', '🛵', '🚁', '🛸', '🚤', '🎈'
    ];
    const feedback = ['Super job! 🌟', 'Wow, awesome!', 'You’re a star!', 'Fantastic!', 'Yay, you did it!'];

    let currentTarget = '';
    let level = 1;
    let score = 0;
    const maxLevels = 5;

    function speak(text) {
      const synth = window.speechSynthesis;
      const utter = new SpeechSynthesisUtterance(text);
      utter.rate = 0.7;
      utter.pitch = 1.2;
      synth.speak(utter);
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function startGame() {
      bgMusic.volume = 0.15; // Slightly louder but still soft
      bgMusic.play().catch(err => console.log('Audio play failed:', err));
      level = 1;
      score = 0;
      levelDisplay.textContent = level;
      nextRound();
    }

    function getEmojisForLevel() {
      const emojiCounts = [4, 5, 6, 7, 8];
      return shuffle([...allEmojis]).slice(0, emojiCounts[level - 1]);
    }

    function nextRound() {
      gameContainer.innerHTML = `
        <div class="top-bar">
          <h1>Fun Logic Adventure 🌟</h1>
          <button onclick="exitGame()" class="exit-btn">Exit</button>
        </div>
        <p class="level-display">Level: ${level}</p>
      `;

      const chosen = getEmojisForLevel();
      currentTarget = chosen[Math.floor(Math.random() * chosen.length)];

      const instructions = document.createElement('p');
      instructions.className = 'instructions';
      instructions.innerText = `Find the ${currentTarget}`;
      gameContainer.appendChild(instructions);

      speak(`Can you find the ${currentTarget}?`);

      const grid = document.createElement('div');
      grid.className = 'emoji-grid';
      chosen.forEach(e => {
        const div = document.createElement('div');
        div.className = 'emoji-item';
        div.innerText = e;
        div.onclick = () => checkAnswer(div, e);
        grid.appendChild(div);
      });
      gameContainer.appendChild(grid);
    }

    function checkAnswer(div, emoji) {
      if (emoji === currentTarget) {
        div.classList.add('correct');
        score += 10;
        const say = feedback[Math.floor(Math.random() * feedback.length)];
        speak(say);
        setTimeout(() => {
          if (level < maxLevels) {
            level++;
            levelDisplay.textContent = level;
            nextRound();
          } else {
            gameContainer.innerHTML = `
              <div class="top-bar">
                <h1>Game Over! 🎉</h1>
                <button onclick="exitGame()" class="exit-btn">Exit</button>
              </div>
              <p class="instructions">You won! Your score: ${score}</p>
              <button class="start-btn" onclick="startGame()">Play Again</button>
            `;
            speak('Congratulations, you won!');
          }
        }, 1500);
      } else {
        div.classList.add('incorrect');
        speak('Oops, try again!');
        setTimeout(() => div.classList.remove('incorrect'), 800);
      }
    }

    function exitGame() {
      bgMusic.pause();
      gameContainer.innerHTML = `
        <div class="top-bar">
          <h1>Fun Logic Adventure 🌟</h1>
          <button onclick="exitGame()" class="exit-btn">Exit</button>
        </div>
        <p class="instructions">Tap start to play!</p>
        <button class="start-btn" id="start-btn">Start Game</button>
      `;
      const newStartBtn = document.getElementById('start-btn');
      newStartBtn.onclick = startGame;
    }

    startBtn.onclick = startGame;
  </script>
</body>
</html>
